<?xml version="1.0" encoding="UTF-8"?>
<sqls>
    <sql id="user-query-by-acc">
        <![CDATA[
			select id, acc
			from t_user
			where acc = :acc
			and status = 0
		]]>
    </sql>

    <sql id="user-register">
        <![CDATA[
			insert into t_user(acc, psw, create_time, status)
			values(:acc, password(:psw), now(), 0)
		]]>
    </sql>

    <sql id="user-query">
        <![CDATA[
			select id as id, id as userId
			from t_user
			where acc = :acc
			and psw = password(:psw)
			and status = 0
		]]>
    </sql>

    <sql id="user-login">
        <![CDATA[
			insert into t_login(user_id, token, create_time, status)
			values(:id, :token, now(), 0)
		]]>
    </sql>

    <sql id="user-logout">
        <![CDATA[
            update t_login
            set status = 1
            where user_id = :userId
            and token = :token
		]]>
    </sql>

    <sql id="user-collect">
        <![CDATA[
            select id, name, path
            from t_store
            where user_id = :userId
            and kind = :storeKind
            and status = 0
            order by create_time desc
		]]>
    </sql>
</sqls>